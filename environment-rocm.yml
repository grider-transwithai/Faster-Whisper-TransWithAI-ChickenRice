# Conda environment for AMD ROCm/HIP on Windows.
#
# Notes:
# - The HIP-enabled `ctranslate2` wheel is installed in CI from GitHub Releases.
# - The AMD ROCm runtime wheels (rocm_sdk_core + rocm_sdk_libraries_*) are also
#   installed in CI from AMD's wheelhouse and bundled by PyInstaller.
name: faster-whisper-rocm
channels:
  - conda-forge
  - defaults

dependencies:
  - python=3.10

  # Core deps
  - librosa>=0.10.0
  - ffmpeg>=8.0
  - pip

  - pip:
      # faster-whisper and related
      - faster-whisper>=1.0.0
      - transformers>=4.30.0

      # VAD (CPU)
      - onnxruntime==1.23.2

      # Utilities
      - pyjson5>=1.6.0
      - markupsafe==2.1.5
      - backports.functools-lru-cache

      # Build tools
      - pyinstaller>=6.0.0
      - setuptools>=65.0.0
      - wheel>=0.38.0
      - build>=0.10.0
      - requests>=2.28.0

      # Modal inference support
      - modal
      - questionary

      # Test deps
      - pytest>=7.0.0
      - pytest-cov>=4.0.0
